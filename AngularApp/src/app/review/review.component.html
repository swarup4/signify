<div class="container">
    <div class="filter">
        <form>
            <div class="input-filter">
                <mat-form-field appearance="fill">
                    <mat-label>Ratings</mat-label>
                    <mat-select name="rating" [(ngModel)]="filter.rating" (selectionChange)="selectFilter()">
                        <mat-option *ngFor="let rating of ratings" [value]="rating.val">
                            {{ rating.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="input-filter">
                <mat-form-field appearance="fill">
                    <mat-label>Store Type</mat-label>
                    <mat-select name="review" [(ngModel)]="filter.review_source" (selectionChange)="selectFilter()">
                        <mat-option *ngFor="let review of reviewSource" [value]="review.val">
                            {{ review.name }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
            <div class="input-filter">
                <mat-form-field appearance="fill">
                    <mat-label>Choose a date</mat-label>
                    <input matInput [matDatepicker]="picker" (dateChange)="selectDate($event.value)">
                    <mat-hint>MM/DD/YYYY</mat-hint>
                    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                </mat-form-field>
            </div>
        </form>
    </div>


    <div class="table-data">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

            <ng-container matColumnDef="author">
                <th mat-header-cell *matHeaderCellDef> Author </th>
                <td mat-cell *matCellDef="let element"> {{element.author}} </td>
            </ng-container>

            <ng-container matColumnDef="review_source">
                <th mat-header-cell *matHeaderCellDef> Review Source </th>
                <td mat-cell *matCellDef="let element"> {{element.review_source}} </td>
            </ng-container>

            <ng-container matColumnDef="title">
                <th mat-header-cell *matHeaderCellDef> Title </th>
                <td mat-cell *matCellDef="let element"> {{element.title}} </td>
            </ng-container>

            <ng-container matColumnDef="review">
                <th mat-header-cell *matHeaderCellDef> Review </th>
                <td mat-cell *matCellDef="let element"> {{element.review}} </td>
            </ng-container>

            <ng-container matColumnDef="rating">
                <th mat-header-cell *matHeaderCellDef> Rating </th>
                <td mat-cell *matCellDef="let element"> {{element.rating}} </td>
            </ng-container>

            <ng-container matColumnDef="product_name">
                <th mat-header-cell *matHeaderCellDef> Product Name </th>
                <td mat-cell *matCellDef="let element"> {{element.product_name}} </td>
            </ng-container>

            <ng-container matColumnDef="reviewed_date">
                <th mat-header-cell *matHeaderCellDef> Reviewed Date </th>
                <td mat-cell *matCellDef="let element"> {{element.reviewed_date}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
            <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
        </table>

    </div>

    <div>
        <table style="width: 400px;">
            <tr>
                <th>Ratings</th>
                <th>Count</th>
            </tr>
            <tr *ngFor="let count of totalCount">
                <td>{{ count.rating }}</td>
                <td>{{ count.count }}</td>
            </tr>
        </table>

        <table style="width: 400px;">
            <tr>
                <th>review_source</th>
                <th>year</th>
                <th>month</th>
                <th>average</th>
            </tr>
            <tr *ngFor="let count of averageData">
                <td>{{ count.review_source }}</td>
                <td>{{ count.year }}</td>
                <td>{{ count.month }}</td>
                <td>{{ count.average }}</td>
            </tr>
        </table>
    </div>
</div>